<html><head><title>Not bullethell (or is it?)</title></head><body><canvas id='cvs'></canvas><p id='info'></p><h1 style='color:red' hidden>You lose</h1><script>const cvs=document.getElementById('cvs');const ctx=cvs.getContext('2d');cvs.width=600;cvs.height=600;cvs.style.border='1px solid black';let loopContinue=true;function collide(obj1,obj2) {return Math.hypot(Math.abs(obj1.x-obj2.x),Math.abs(obj1.y-obj2.y))<obj1.r+obj2.r};let health=100;class Player {constructor(x,y){this.x=x;this.y=y;this.c='black';this.r=20;this.damage=20;};draw(){ctx.fillStyle=this.c;ctx.beginPath();ctx.arc(this.x,this.y,this.r,0,2*Math.PI);ctx.fill();ctx.closePath();};shoot(x,y) {let dir=Math.atan2(y-this.y,x-this.x);bullets.push(new Bullet(this.x,this.y,Math.cos(dir)*3,Math.sin(dir)*3))}};class NormalEnemy {constructor(x,y) {this.x=x;this.y=y;this.r=15;this.c='blue';this.dx=0;this.dy=0;this.shouldDelete=false;this.damage=10;this.health=60;};draw(){ctx.beginPath();ctx.fillStyle=this.c;ctx.arc(this.x,this.y,this.r,0,2*Math.PI);ctx.fill();ctx.closePath();};getDirection() {let dir=Math.atan2(player.y-this.y,player.x-this.x);this.dx=Math.cos(dir);this.dy=Math.sin(dir)};update() {if (collide(this,player)) {this.shouldDelete=true;health-=this.damage;if(health<=0){lose()}};this.getDirection();this.x+=this.dx;this.y+=this.dy;}};class Bullet {constructor(x,y,dx,dy) {this.x=x;this.y=y;this.dx=dx;this.dy=dy;this.r=5;this.c='green';this.shouldDelete=false;};draw() {ctx.fillStyle=this.c;ctx.beginPath();ctx.arc(this.x,this.y,this.r,0,2*Math.PI);ctx.fill();ctx.closePath();};update() {enemies.forEach(x=>{if (collide(this,x)){this.shouldDelete=true;x.health-=player.damage;if(x.health<=0){x.shouldDelete=true;}}});this.x+=this.dx;this.y+=this.dy}};const player=new Player(100,100);player.draw();let enemies=[new NormalEnemy(200,200)];let bullets=[];function lose() {cvs.hidden=true;loopContinue=false;document.getElementById('info').hidden=true;document.querySelector('h1').hidden=false};let keyMap={};function checkKeys() {if (keyMap.a) {if (player.x>player.r) player.x-=3;}if (keyMap.d){if (player.x<600-player.r) player.x+=3};if(keyMap.w){if (player.y>player.r) player.y-=3;}if(keyMap.s){if (player.y<600-player.r) player.y+=3}};function loop(){if (loopContinue) {requestAnimationFrame(loop)};ctx.clearRect(0,0,600,600);bullets=bullets.filter(x=>!x.shouldDelete);enemies=enemies.filter(x=>!x.shouldDelete);player.draw();enemies.forEach(x=>{x.update();x.draw();});bullets.forEach(x=>{x.draw();x.update();});document.getElementById('info').innerHTML=`health: ${health}`;checkKeys();};loop();document.addEventListener('keydown',(e)=>{keyMap[e.key]=true;});document.addEventListener('keyup',(e)=>{keyMap[e.key]=false});cvs.addEventListener('mousedown',(e)=>{let x=e.clientX-cvs.getBoundingClientRect().left;let y=e.clientY-cvs.getBoundingClientRect().top;player.shoot(x,y)});setInterval(()=>{let x=0;let y=0;if(Math.random()<0.5){x=(Math.random()<0.5)?-15:615;y=Math.random()*570+15}else{y=(Math.random()<0.5)?-15:615;x=Math.random()*570+15};enemies.push(new NormalEnemy(x,y))},1000)</script></body></html>